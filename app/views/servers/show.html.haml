= render 'menu'

.panel.float
  %h3= t('helpers.label.server.name')
  .pc
    = @server.name
.panel.float
  %h3= t('helpers.label.server.host')
  .pc
    = @server.host
.panel.float
  %h3= t('helpers.label.server.userpass')
  .pc
    = "#{@server.username} (" + (@server.password.blank? ? t("no_password") : "*" * @server.password.length) +  ")"
.clear
.panel.float
  %h3= t('Private_Key_Constant')
  .pc
    = @server.constant.present? ? link_to(@server.constant.name, settings_path) : t("none")

.clear
.separator

- if @server.jobs.size == 0
  .field
    = link_to 'No jobs related to this server! Why not create a blank job to test connectivity?', create_blank_job_for_server_path(@server), method: :post, class: "button button-blue"
- else
  %table.list
    %thead
      %tr
        %th ID
        %th= t('helpers.label.job.name')
        %th.date= t('helpers.label.job.Updated_At')
    %tfoot
      %tr
        %td{ colspan: 3 }
          = t("related_job", count: @server.jobs.size)
    %tbody
      - @server.jobs.each do |job|
        %tr
          %td= job.id
          %td
            = link_to job.name, job
            %span.interpreter
              = job.interpreter.try(:path).presence || "Script"
          %td.date= job.updated_at
